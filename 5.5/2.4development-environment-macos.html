<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>

    <meta name="baidu-site-verification" content="MfC8ppEukL"/>
    <!-- CSRF Token -->
    <meta name="csrf-token" content="m55PPXyHnYShMoZrIKZEHilabsCOjlJbePu76Udq">

    <title>开发环境搭建 - MacOS | 《Laravel 教程 - Web 开发实战入门 ( Laravel 5.5 )》 | Laravel 实战教程</title>

    <meta name="author" content="Summer"/>
    <meta name="description" content="命令行是程序员的好伙伴 作为一名优秀的程序员，熟练的命令行操作也是必不可少的。本书中，我们的很多操作都会使用到命令行，如： Git 操作； 虚拟机管理； 部署到线上等。 是的，我们有意想让你成为优秀的程序员 ;-...
" />
    <meta name="keywords" content="laravel教程,laravel书籍,laravel入门,laravel示例,laravel课程,laravel培训,php教程,php书籍"/>

    <link rel="shortcut icon" href="../images/KDiyAbV0hj1ytHpRTOlVpucbLebonxeX.png"/>

    <!-- Styles -->
    <link href="../css/app.css" rel="stylesheet">
    <style>
        .ui.top.menu {border-top: 4px solid #f46660;}
    </style>

</head>
<body class=" books-articles-show-page">

<!--left-->
<div class="ui vertical  sidebar menu left" style="z-index: 99999">
    <div class="item">
        <b>Laravel 教程 - Web 开发实战入门 ( Laravel 5.5 )</b>
    </div>
    <div class="item">
        <div class="header">
            第一章. 基础信息
        </div>
        <div class="menu article">
            <a class="item" href="1.1about-the-book.html">1.1. 序言</a>
            <a class="item " href="1.2about-author.html">1.2. 关于作者</a>
            <a class="item " href="1.3laravel-and-php.html">1.3. Laravel 与 PHP</a>
            <a class="item " href="1.4reading-guide.html">1.4. 如何正确阅读本书？</a>
            <a class="item " href="1.5writing-convention.html">1.5. 写作约定</a>
            <a class="item " href="1.6release-notes.html">1.6. 发行说明</a>
            <a class="item " href="1.7the-book-source-code.html">1.7. 本书源码</a>
            <a class="item " href="1.8feedback-correction.html">1.8. 反馈纠错</a>
            <a class="item " href="1.9faq.html">1.9. 常见问题</a>
            <a class="item " href="1.10received-praise.html">1.10. 收到的赞誉</a>
        </div>
    </div>

    <div class="item">
        <div class="header">
            第二章. 开发环境布置
        </div>

        <div class="menu article">
            <a class="item " href="2.1the-editor-to-choose.html">2.1. 编辑器选用</a>
            <a class="item " href="2.2command-line-tool.html">2.2. 命令行工具</a>
            <a class="item " href="2.3the-development-environment-to-build.html">2.3. 开发环境搭建</a>
            <a class="item active" href="2.4development-environment-macos.html">2.4. 开发环境搭建 - MacOS</a>
            <a class="item " href="2.5development-environment-windows.html">2.5. 开发环境搭建 - Windows</a>
            <a class="item " href="2.6browser-selection.html">2.6. 浏览器选择</a>
            <a class="item " href="2.7the-first-application-hello-laravel.html">2.7. 第一个应用，Hello Laravel！</a>
            <a class="item " href="2.8git-and-making.html">2.8. Git 与 GitHub</a>
            <a class="item " href="2.9the-deployment-of.html">2.9. 部署上线</a>
            <a class="item " href="2.10summary.html">2.10. 小结</a>
        </div>
    </div>

    <div class="item">
        <div class="header">
            第三章. 构建页面
        </div>
        <div class="menu article">
            <a class="item " href="3.1chapter.html">3.1. 章节说明</a>
            <a class="item " href="3.2create-an.html">3.2. 创建应用</a>
            <a class="item " href="3.3a-static-page.html">3.3. 静态页面</a>
            <a class="item " href="3.4artisan-command.html">3.4. Artisan 命令</a>
            <a class="item " href="3.5summary.html">3.5. 小结</a>
        </div>
    </div>

    <div class="item">
        <div class="header">
            第四章. 优化页面
        </div>
        <div class="menu article">
            <a class="item " href="4.1chapter.html">4.1. 章节说明</a>
            <a class="item " href="4.2style-beautification.html">4.2. 样式美化</a>
            <a class="item " href="4.3laravel-front-end-workflow.html">4.3. Laravel 前端工作流</a>
            <a class="item " href="4.4local-view.html">4.4. 局部视图</a>
            <a class="item " href="4.5the-links-in-the-layout.html">4.5. 布局中的链接</a>
            <a class="item " href="4.6user-registration.html">4.6. 用户注册页面</a>
            <a class="item " href="4.7summary.html">4.7. 小结</a>
        </div>
    </div>

    <div class="item">
        <div class="header">
            第五章. 用户模型
        </div>
        <div class="menu article">
            <a class="item " href="5.1chapter.html">5.1. 章节说明</a>
            <a class="item " href="5.2database-migration.html">5.2. 数据库迁移</a>
            <a class="item " href="5.3check-the-database-table.html">5.3. 查看数据库表</a>
            <a class="item " href="5.4model-file.html">5.4. 模型文件</a>
            <a class="item " href="5.5create-a-user-object.html">5.5. 创建用户对象</a>
            <a class="item " href="5.6to-find-the-user-object.html">5.6. 查找用户对象</a>
            <a class="item " href="5.7update-user-object.html">5.7. 更新用户对象</a>
            <a class="item " href="5.8summary.html">5.8. 小结</a>
        </div>
    </div>

    <div class="item">
        <div class="header">
            第六章. 用户注册
        </div>
        <div class="menu article">
            <a class="item " href="6.1chapter.html">6.1. 章节说明</a>
            <a class="item " href="6.2according-to-the-users-information.html">6.2. 显示用户的信息</a>
            <a class="item " href="6.3registration-form.html">6.3. 注册表单</a>
            <a class="item " href="6.4the-user-data-validation.html">6.4. 用户数据验证</a>
            <a class="item " href="6.5registration-failed-error-message.html">6.5. 注册失败错误消息</a>
            <a class="item " href="6.6registered-successfully.html">6.6. 注册成功</a>
            <a class="item " href="6.7using-postgresql-on-heroku.html">6.7. 在 Heroku 上使用 PostgreSQL</a>
            <a class="item " href="6.8summary.html">6.8. 小结</a>
        </div>
    </div>

    <div class="item">
        <div class="header">
            第七章. 会话管理
        </div>
        <div class="menu article">
            <a class="item " href="7.1chapter.html">7.1. 章节说明</a>
            <a class="item " href="7.2the-session.html">7.2. 会话</a>
            <a class="item " href="7.3the-user-login.html">7.3. 用户登录</a>
            <a class="item " href="7.4exit.html">7.4. 退出</a>
            <a class="item " href="7.5remember-that-i.html">7.5. 记住我</a>
            <a class="item " href="7.6summary.html">7.6. 小结</a>
        </div>
    </div>

    <div class="item">
        <div class="header">
            第八章. 用户 CRUD
        </div>
        <div class="menu article">
            <a class="item " href="8.1chapter.html">8.1. 章节说明</a>
            <a class="item " href="8.2update-user.html">8.2. 更新用户</a>
            <a class="item " href="8.3permissions-system.html">8.3. 权限系统</a>
            <a class="item " href="8.4list-all-user.html">8.4. 列出所有用户</a>
            <a class="item " href="8.5delete-user.html">8.5. 删除用户</a>
            <a class="item " href="8.6summary.html">8.6. 小结</a>
        </div>
    </div>

    <div class="item">
        <div class="header">
            第九章. 邮件发送
        </div>
        <div class="menu article">
            <a class="item " href="9.1chapter.html">9.1. 章节说明</a>
            <a class="item " href="9.2account-activation.html">9.2. 账户激活</a>
            <a class="item " href="9.3password-reset.html">9.3. 密码重设</a>
            <a class="item " href="9.4in-a-production-environment-to-send-mail.html">9.4. 在生产环境中发送邮件</a>
            <a class="item " href="9.5summary.html">9.5. 小结</a>
        </div>
    </div>

    <div class="item">
        <div class="header">
            第十章. 微博 CRUD
        </div>
        <div class="menu article">
            <a class="item " href="10.1chapter.html">10.1. 章节说明</a>
            <a class="item " href="10.2weibo-model.html">10.2. 微博模型</a>
            <a class="item " href="10.3according-to-weibo.html">10.3. 显示微博</a>
            <a class="item " href="10.4weibo-related-operations.html">10.4. 微博相关的操作</a>
            <a class="item " href="10.5summary.html">10.5. 小结</a>
        </div>
    </div>

    <div class="item">
        <div class="header">
            第十一章. 粉丝关系
        </div>
        <div class="menu article">
            <a class="item " href="11.1chapter.html">11.1. 章节说明</a>
            <a class="item " href="11.2fan-data-table.html">11.2. 粉丝数据表</a>
            <a class="item " href="11.3focus-on-the-users-web-interface.html">11.3. 关注用户的网页界面</a>
            <a class="item " href="11.4dynamic-flow.html">11.4. 动态流</a>
            <a class="item " href="11.5summary.html">11.5. 小结</a>
        </div>
    </div>

    <div class="item">
        <div class="header">
            第十二章. 附录
        </div>
        <div class="menu article">
            <a class="item " href="12.1proper-noun-index.html">12.1. 专有名词索引</a>
            <a class="item " href="12.2command-line-index.html">12.2. 命令行索引</a>
        </div>
    </div>

    <div class="item">
        <div class="header">
            第十三章. 附言
        </div>
        <div class="menu article">
            <a class="item " href="13.1the-next-step-study-suggest.html">13.1. 下一步的学习建议</a>
        </div>
    </div>
</div>
<!--left-->

<div class="ui basic teal  launch right attached fixed button clicked-hide-guide user-has-done-btn"
     data-act="stickymenu_sidebar_clicked">
    <span class="duke-pulse stickymenu-sidebar-guide"></span>

    <i class="content icon"></i>
    <span class="text">Menu</span>
</div>

<div class="pusher">

    <div class="main container">

        <nav class="ui main borderless menu top stackable">
            <div class="ui container">
                <a class="header item" href="../index.html">
                    Laravel 实战教程
                    <div class="ui left pointing orange basic label" style="font-weight: normal;"> 全栈给我自由</div>
                </a>


                <a href="https://laravel-china.org/topics" target="_blank" class="item no-pjax">社区</a>
                <a href="https://laravel-china.org/categories/4" target="_blank" class="item">问答</a>

                <div class="ui fluid category search item">
                    <div class="ui icon input">
                        <input class="prompt" type="text" placeholder="">
                        <i class="search icon"></i>
                    </div>
                    <div class="results"></div>
                </div>


                <div class=" right menu stackable">

                    <a class="ui item">
                        <i class="icon gift"></i> 邀请好友
                    </a>

                    <a class="item" title="浏览历史">

                        <span class="duke-pulse history-guide"></span>

                        <i class="ui icon history grey middle disabled"></i>
                    </a>

                    <a class="item">
                        <span class="ui basic circular label notification" id="notification-count">1</span>
                    </a>

                    <div class="ui simple item dropdown article stackable nav-user-item">
                        <img class="ui avatar image"
                             src="../images/21929_1517463384.png">
                        &nbsp;

                        SWKJ <i class="dropdown icon"></i>

                        <div class="ui menu stackable">

                            <a class="item">
                                <i class="icon user"></i>
                                个人中心
                            </a>

                            <a class="item">
                                <i class="icon payment"></i>
                                卡券中心
                            </a>

                        </div>
                    </div>
                </div>

            </div>
        </nav>

        <div class="ui centered grid container stackable">

            <div class="twelve wide column">


                <div class="ui segment article-content">


                    <div class="extra-padding">

                        <h1>
                            <i class="grey file text outline icon"></i>
                            <span style="line-height: 34px;">2.4. 开发环境搭建 - MacOS</span>

                            <div class="pull-right">


                                <div class="ui labeled button tiny">

                                    <div class="ui compact button tiny kb-star basic " data-act="star" data-id="545">

                                        <i class="thumbs up icon"></i> <span class="state">点赞</span>
                                    </div>
                                    <a class="ui basic label star_count">22</a>
                                </div>
                            </div>


                        </h1>

                        <p class="book-article-meta">

                            <a href="../index.html"><i
                                    class="icon book"></i> Laravel 教程 - Web 开发实战入门 ( Laravel 5.5 )</a>

                            <span class="divider">/</span>

                            <span class="relative clicked-hide-guide">
                <a class="chapter-title user-has-done-btn" data-act="chapter_sidebar_clicked"
                   href="javascript:void(0);"><i class="icon map signs"></i> 第二章. 开发环境布置</a>
    </span>

                        </p>


                        <div class="ui divider"></div>

                        <div class="ui readme markdown-body content-body">
                            <h2>系统要求</h2>
                            <blockquote>
                                <p>苹果 Mac OS X Yosemite 及以上；</p>
                            </blockquote>
                            <h2>步骤简略</h2>
                            <p>接下来让我们按照这几个步骤来完成整个 Laravel 开发环境的安装及配置：</p>
                            <ol><li>安装 VirtualBox</li>
                                <li>安装 Vagrant</li>
                                <li>导入 Homestead Box 虚拟机盒子</li>
                                <li>安装 Git</li>
                                <li>安装 Homestead 管理脚本</li>
                                <li>配置 <code>Homestead.yaml</code> 文件</li>
                                <li>启动 Homestead 虚拟机</li>
                            </ol>

                            <h2>安装 VirtualBox</h2>
                            <p>VirtualBox 是 Oracle 公司的开源虚拟机软件。VirtualBox 号称是最强的免费虚拟机软件，它不仅功能齐全，而且性能也很优异！VirtualBox 支持大部分流行的系统，如：Mac, Windows, Linux 等。</p>
                            <p>本书撰写时最新的 VirtualBox 版本为 5.1.14，也是本书教程使用的版本，如果你安装的是之后更新的 VirtualBox，那也不会有太大问题，因为软件更新时一般都会对之前的版本进行兼容处理。但我还是建议你使用与我相同的 VirtualBox 版本，以免有歧义，你可以使用迅雷下载 <a href="http://download.virtualbox.org/virtualbox/5.1.14/VirtualBox-5.1.14-112924-OSX.dmg">这个链接</a>  或者使用 <a href="https://pan.baidu.com/s/1slWENqH">百度盘下载</a>。</p>
                            <blockquote>
                                <p>注意：如果你安装 VirtualBox 5.1.14 版遇到问题的话，可以到 <a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox 官网</a> 下载当前操作系统相对应的安装包进行尝试。</p>
                            </blockquote>
                            <p>下载完成之后，双击安装包进行安装。</p><p>
                            <img class="rm-style" src="../images/GFmMfo6ssc.png" alt="GFmMfo6ssc.png" /></p>

                            <p>之后按照提示操作一步一步进行安装即可。</p>
                            <h2>安装 Vagrant</h2>
                            <p>Vagrant 是用来管理虚拟机的工具，支持当前主流的虚拟机系统如 VirtualBox、VMware、AWS 等。Vagrant 的主要作用是提供一个可配置、可移植和复用的软件环境。Vagrant 让你通过编写一个 Vagrantfile 文件来控制虚拟机的启动、虚拟机网络环境的配置、虚拟机与主机间的文件共享，以及启动后自动执行一些配置脚本，如自动执行一个 Shell Script 来安装一些必备的开发工具，如安装配置MySQL、PHP，甚至是自动配置 Nginx 站点。这意味着，在一个多人开发的项目中，你只需要同步 Vagrantfile 文件，就可以保证参与项目的每个人各自的机器上拥有一致的开发环境。</p>
                            <p>本书撰写时最新的 Vagrant 版本为 1.9.0，也是本书教程使用的版本。同样的，我也建议你安装与本书相同的 Vagrant 版本，1.9.0 版本的 Vagrant 可以使用 <a href="https://releases.hashicorp.com/vagrant/1.9.0/vagrant_1.9.0.dmg">迅雷下载链接</a> 或者 <a href="https://pan.baidu.com/s/1slWENqH">百度盘下载</a>。</p>
                            <blockquote>
                                <p>注意：如果安装 1.9.0 版本的 Vagrant 出现问题的话，可在 <a href="https://www.vagrantup.com/downloads.html">Vagrant 官网</a> 下载当前操作系统相对应最新的安装包进行尝试。</p>
                            </blockquote>
                            <p>然后一步一步按照默认安装即可。</p><p>
                            <img class="rm-style" src="../images/uDC2T32kXb.png" alt="uDC2T32kXb.png" /></p>

                            <h2>Homestead 介绍</h2>
                            <p>Homestead 利用 Vagrantfile 提供的便利，定制了一整套的可配置、可移植和复用的 Laravel  开发环境。Homestead 虚拟机里面包含了 Nginx Web 服务器、PHP 7.0、MySQL、Postgres、Redis、Memcached、Node，以及所有你在使用 Laravel 开发时需要用到的各种软件。</p>
                            <p>Homestead 包含了两个东西：</p>
                            <ul><li>Homestead 管理脚本；</li>
                                <li>Homestead Box 虚拟机盒子。</li>
                            </ul>

                            <p>接下来独自说明下。</p>
                            <h3>1. Homestead 管理脚本</h3>
                            <p><a href="https://github.com/laravel/homestead">Homestead</a> 脚本使用 Ruby 和 Shell 脚本编写而成。原理是对 Vagrantfile 文件做定制。将从 <code>~/Homestead/Homestead.yaml</code> 读取的配置信息，在 provision 时，解析为 Vagrant 命令并进行对虚拟机的配置。Homestead 脚本的作用在于，提供了极其简单易用的接口，使我们只需要通过傻瓜化配置，即可完成复杂的任务。以下是几个常用的任务：</p>
                            <ul><li>IP 配置，端口映射；</li>
                                <li>Nginx Site 创建；</li>
                                <li>数据库创建；</li>
                                <li>主机文件夹挂载到虚拟机等任务。</li>
                            </ul>

                            <p>所有 Homestead 的版本历史在 <a href="https://github.com/laravel/homestead/releases">此处</a> 可以找到。在本书中，为了提高操作的效率，我们将会使用定制版本的 Homestead。</p>
                            <h3>2. Homestead Box 虚拟机盒子</h3>
                            <p><code>homestead.box</code> 虚拟机盒子是提前打包好的 Vagrant Box 虚拟机盒子，里面预装了 Nginx Web 服务器、PHP 7.0、MySQL、Postgres、Redis、Memcached、Node，以及所有你在使用 Laravel 开发时所需要用到的各种软件。</p>
                            <p>所有虚拟机盒子版本历史 <a href="https://atlas.hashicorp.com/laravel/boxes/homestead/">在此</a>。</p>
                            <p>打不开的用户，下图是截屏：</p>
                            <p><img src="../images/U8hJY6A9Bf.png" alt="file" /></p>
                            <p>可以看出 Homestead Box 虚拟机盒子有很多版本。不过，如 Homestead 脚本，为了学习的流畅性，我们接下来将会使用定制版本的虚拟机盒子，你不需要太担心版本的事情。</p>
                            <h2>安装和使用 Homestead</h2>
                            <p>接下来，我们会讲解：</p>
                            <ol><li>下载和导入 Homestead Box 虚拟机盒子；</li>
                                <li>安装 Git ，为下载 Homestead 管理脚本做准备；</li>
                                <li>使用 Git 下载 Homestead 管理脚本；</li>
                            </ol>

                            <h3>1. 下载和导入 Homestead Box</h3>
                            <p>由于国内的网络环境原因，我们特意为大家定制了适用于国情的 Homestead 安装包，该安装包提供了以下内容：</p>
                            <ul><li>Composer 加速，配置了 <a href="https://laravel-china.org/composer">Composer 中国全量镜像</a> 支持；</li>
                                <li>默认集成 Heroku 工具；</li>
                                <li>默认集成 Yarn，并为 Yarn 加了淘宝镜像的加速；</li>
                                <li>使用 CNPM 对 NPM 进行加速。</li>
                            </ul>

                            <p>接下来让我们开始进行 Homestead 的安装，首先我们需要下载 <a href="http://download.fsdhub.com/lt-homestead-3-0-0-2017082400.zip">Homestead 虚拟机盒子</a>，建议大家使用迅雷离线下载或者其他离线下载方式下载此盒子。</p>
                            <p>下载后的文件为 <code>lt-homestead-3-0-0-2017082400.zip</code>，请对其进行 zip 解压操作，解压成功后可以看到目录 <code>lt-homestead-3-0-0-2017082400</code>，此目录下包含两个文件：</p>
                            <ul><li>homestead-virtualbox-3.0.0.box（教程定制化过的 Homestead 盒子）</li>
                                <li>metadata.json（盒子的导入配置文件）</li>
                            </ul>

                            <p>在解压目录中 <code>lt-homestead-3-0-0-2017082400</code> 运行以下命令导入 Box：</p>
                            <pre><code class="language-bash">&gt; vagrant box add metadata.json</code></pre>
                            <blockquote>
                                <p>注意：请必须解压到 <strong>非中文路径</strong>，有同学反馈中文路径会出现不可预知问题。</p>
                            </blockquote>
                            <p>如下图所示：</p>
                            <p><img src="../images/MnmDSnQ7MT.png" alt="file" /></p>
                            <p>至此完成 Homestead Vagrant 盒子的导入。</p>
                            <blockquote>
                                <p>注：导入成功后，<code>lt-homestead-3-0-0-2017082400</code> 文件夹可任意删除。</p>
                            </blockquote>
                            <h3>2. 安装 Git</h3>
                            <p>现在我们需要安装 Git ，为下载 Homestead 管理脚本做准备。在 Mac OS X 下，我们可以通过安装 Xcode 命令行来快速安装 Git：</p>
                            <pre><code class="language-bash">&gt; xcode-select --install</code></pre>
                            <p>安装成功后使用以下命令来检测是否安装成功：</p>
                            <pre><code class="language-bash">&gt; git --version
git version 2.9.3 (Apple Git-75)</code></pre>
                            <blockquote>
                                <p>注：不需要担心你的版本与我不同。</p>
                            </blockquote>
                            <h3>3. 下载 Homestead 管理脚本</h3>
                            <p>因国内网络限制，为方便下载和后续管理脚本的流畅使用，本书中将使用定制版本的 Homestead 脚本，定制版有以下优势：</p>
                            <ul><li>从国内 coding.net 网站下载，下载速度会比 <a href="https://github.com/laravel/homestead">官方</a> 更快；</li>
                                <li>对脚本进行修改，移除了每一次 <code>provision</code> 时 <code>composer self-update</code> 的卡顿。</li>
                            </ul>

                            <p>接下来，使用 Git 下载定制版的 Homestead：</p>
                            <pre><code class="language-bash">&gt; cd ~
&gt; git clone https://git.coding.net/summerblue/homestead.git Homestead</code></pre>
                            <blockquote>
                                <p>注：我们把 Homestead 放在 <code>~/Homestead</code> 路径下，为方便后面的讲解，请保持一致。</p>
                            </blockquote>
                            <p>完成之后我们需要进入 <code>Homestead</code> 目录，使用 Git 检出我们需要的 Homestead 版本：</p>
                            <pre><code class="language-bash">&gt; cd ~/Homestead
&gt; git checkout v5.4.0</code></pre>
                            <blockquote>
                                <p>注：为了保证后续讲解的流畅性，请注意版本的一致性，这里我们使用 <code>v5.4.0</code>。</p>
                            </blockquote>
                            <p>接下来我们需要初始化 Homestead：</p>
                            <pre><code class="language-bash">&gt; bash init.sh</code></pre>
                            <p>运行以上命令后，会在 <code>~/Homestead</code> 目录下生成以下三个文件：</p>
                            <ul><li>Homestead.yaml - 主要配置信息文件，我们可以在此文件中配置 Homestead 的站点和数据库等信息；</li>
                                <li>after.sh - 每一次 Homestead 盒子重置后（provision）会调用的 shell 脚本文件；</li>
                                <li>aliases - 每一次 Homestead 盒子重置后（provision），会被替换至虚拟机的 <code>~/.bash_aliases</code> 文件中，<code>aliases</code> 里可以放一些快捷命令的定义。</li>
                            </ul>

                            <p>接下来我们将会对 <code>Homestead.yaml</code> 文件的各项配置信息进行详细讲解。</p>
                            <h2>Homestead.yaml 配置文件</h2>
                            <p>首先打开文件。如果你安装了 Atom，可通过运行下面命令快速打开 <code>Homestead.yaml</code> 文件：</p>
                            <pre><code class="language-bash">&gt; atom ~/Homestead/Homestead.yaml</code></pre>
                            <blockquote>
                                <p>为了行文方便，后面如果没有提示的话， <code>Homestead.yaml</code> 指的是 <code>~/Homestead/Homestead.yaml</code> 文件。</p>
                            </blockquote>
                            <p><code>Homestead.yaml</code>里的配置大致可以分为以下几种：</p>
                            <ol><li>虚拟机设置；</li>
                                <li>SSH 秘钥登录配置；</li>
                                <li>共享文件夹配置；</li>
                                <li>站点配置；</li>
                                <li>数据库配置；</li>
                                <li>自定义变量；</li>
                            </ol>

                            <p>接下来我们逐个讲解。</p>
                            <h3>1. 虚拟机设置</h3>
                            <p>Homestead 支持我们对虚拟机的 IP，内存，CPU，虚拟机的默认提供者进行配置。这里我们基本不需要做任何配置，因此可以跳过。</p>
                            <pre><code class="language-yaml">ip: "192.168.10.10"
memory: 2048
cpus: 1
provider: virtualbox</code></pre>
                            <h3>2. SSH 秘钥登录配置</h3>
                            <p><code>authorize</code> 选项是指派登录虚拟机授权连接的公钥文件，此文件填写的是主机上的公钥文件地址，虚拟机初始化时，此文件里的内容会被复制存储到虚拟机的 <code>/home/vagrant/.ssh/authorized_keys</code>文件中，从而实现 SSH 免密码登录。在这里我们默认填写即可。</p>
                            <pre><code class="language-yaml">authorize: ~/.ssh/id_rsa.pub</code></pre>
                            <p><code>keys</code> 是数组选项，填写的是本机的 SSH 私钥文件地址。虚拟机初始化时，会将此处填写的所有 SSH 私钥文件复制到虚拟机的 <code>/home/vagrant/.ssh/</code> 文件夹中，从而使虚拟机能共享主机上的 SSH 私钥文件，使虚拟机具备等同于主机的身份认证。此功能为 SSH 授权提供了便利，例如在后面章节中，我们只需要在 GitHub 上配置一个 SSH 公钥，即可实现 GitHub 对虚拟机和主机共同认证。</p>
                            <p>此处我们将公钥和私钥一起同步到虚拟机中：</p>
                            <pre><code class="language-yaml">keys:
    - ~/.ssh/id_rsa
    - ~/.ssh/id_rsa.pub</code></pre>
                            <p>接下来我们来生成 SSH Key，开始之前，我们先使用以下命令来检查主机上是否已经生成过 SSH Key：</p>
                            <pre><code class=" language-php">&gt; ls -al ~/.ssh</code></pre>
                            <p>如果存在 <code>id_rsa</code> 和 <code>id_rsa.pub</code>的话，请跳过以下生成 SSH 的步骤继续阅读剩下内容。</p>
                            <p>否则使用以下方法来生成 SSH Key，请将 <code>your_email@example.com</code> 替换为你的邮箱：</p>
                            <pre><code class="language-bash">&gt; ssh-keygen -t rsa -C "your_email@example.com"
Generating public/private rsa key pair.</code></pre>
                            <p>命令行会提示让你指定秘钥的名称，按回车键将 SSH Key 保存到默认文件名即可：</p>
                            <pre><code class=" language-php">Enter a file in which to save the key (/Users/you/.ssh/id_rsa): [Press enter]</code></pre>
                            <p>接下来会询问你为 SSH Key 设置密码，按回车键即可，默认为空密码：</p>
                            <pre><code class=" language-php">Enter passphrase (empty for no passphrase): [Type a passphrase]
Enter same passphrase again: [Type passphrase again]</code></pre>
                            <p>可以都选择默认，也就是直接敲击几个 <code>Enter</code> 键即可。这时候我们再检查一下：</p>
                            <pre><code class=" language-php">&gt; ls -al ~/.ssh</code></pre>
                            <p>可以看到以下两个文件：</p>
                            <ul><li><code>id_rsa</code> —— SSH 秘钥的 <strong>私钥</strong> (Private Key)</li>
                                <li><code>id_rsa.pub</code> —— SSH 秘钥的 <strong>公钥</strong> (Public Key)</li>
                            </ul>

                            <h3>3. 共享文件夹配置</h3>
                            <p>我们可以通过 <code>folders</code> 来指明本机要映射到 Homestead 虚拟机上的文件夹。</p>
                            <ul><li><code>map</code> 对应的是我们本机的文件夹</li>
                                <li><code>to</code> 对应的是 Homestead 上的文件夹。</li>
                            </ul>

                            <p>为了后续课程讲解，请统一配置如下：</p>
                            <pre><code class="language-yaml">folders:
    - map: ~/Code
      to: /home/vagrant/Code</code></pre>
                            <p>默认 <code>Homestead</code> 会将我们本机的 <code>~/Code</code> 文件夹映射到 <code>/home/vagrant/Code</code> 文件夹上。现在我们本机还没有 <code>~/Code</code> 文件夹，让我们来创建一个：</p>
                            <pre><code class="language-bash">&gt; cd ~
&gt; mkdir Code</code></pre>
                            <p>在后面的章节中，我们将会在该文件夹下放置我们所有的 Laravel 项目，Homestead 会把该文件夹下的项目自动映射到虚拟机的 <code>/home/vagrant/Code</code> 文件夹上。</p>
                            <h3>4. 站点配置</h3>
                            <p>站点配置允许你在主机里，通过域名来访问虚拟机里的 Laravel 应用。如下面 <code>sites</code> 配置所示，将 <code>homestead.test</code> 映射到一个 Laravel 项目的 <code>public</code> 目录上。这一行配置，会命令 Homestead 为我们新建一个 Nginx 站点，并且把 Web Root 配置到指定目录下。Laravel 应用的 Nginx 站点 Web Root 配置，默认就是在根目录下的 <code>public</code> 目录。</p>
                            <pre><code class="language-yaml">sites:
    - map: homestead.test
      to: /home/vagrant/Code/Laravel/public</code></pre>
                            <p>目前 <code>Laravel</code> 项目并不存在。这里先统一配置为以上，请不用着急，在后续的章节中，我们会创建该 <code>Laravel</code> 项目。</p>
                            <p>另外，主机里直接访问虚拟机站点，必须通过绑定 <code>hosts</code> 来实现。接下来我们利用  <code>hosts</code> 文件绑定 <code>homestead.test</code> 到虚拟机 IP <code>192.168.10.10</code>  上。<code>hosts</code> 文件的完整路径为 <code>/etc/hosts</code>，可使用下面命令打开：</p>
                            <pre><code class="language-bash">&gt; atom /etc/hosts</code></pre>
                            <p>在 <code>hosts</code> 文件的最后面加入以下一行：</p>
                            <pre><code class=" language-php">192.168.10.10  homestead.test</code></pre>
                            <p>至此站点就配置好了，等我们在后面章节创建 <code>Laravel</code> 项目后，即可通过浏览器访问 <code>homestead.test</code> 站点。</p>
                            <h3>5. 数据库配置</h3>
                            <p>我们可以为 Homestead 指定数据库名称，这里使用默认设置即可。</p>
                            <pre><code class="language-yaml">databases:
    - homestead</code></pre>
                            <h3>6. 自定义变量</h3>
                            <p>最后，如果你需要自定义一些在虚拟机上可以使用的自定义变量，则可以在 <code>variables</code> 中进行定义。</p>
                            <pre><code class="language-yaml">variables:
    - key: APP_ENV
      value: local</code></pre>
                            <p>Homestead 自定义变量在本书中并未使用，知悉有此功能即可。</p>
                            <h2>运行 Vagrant</h2>
                            <p>完成了 Homestead 的配置，接下来我们要开始启动虚拟机了。</p>
                            <p>在命令中输入 <code>vagrant</code>，能看到 Vagrant 为我们提供了一些便利的命令行，下面简单介绍一下 Vagrant 常用的一些命令行的使用：</p>
                            <table><thead><tr><th>命令行</th>
                                <th>说明</th>
                            </tr></thead><tbody><tr><td>vagrant init</td>
                                <td>初始化  vagrant</td>
                            </tr><tr><td>vagrant up</td>
                                <td>启动  vagrant</td>
                            </tr><tr><td>vagrant halt</td>
                                <td>关闭  vagrant</td>
                            </tr><tr><td>vagrant ssh</td>
                                <td>通过 SSH 登录 vagrant（需要先启动 vagrant）</td>
                            </tr><tr><td>vagrant provision</td>
                                <td>重新应用更改 vagrant 配置</td>
                            </tr><tr><td>vagrant destroy</td>
                                <td>删除 vagrant</td>
                            </tr></tbody></table>

                            <p>让我们开始启动 Homestead：</p>
                            <pre><code class="language-bash">&gt; cd ~/Homestead &amp;&amp; vagrant up</code></pre>
                            <p>第一次启动时，Vagrant 会做以下这几件事情：</p>
                            <ul><li>以导入的 Homestead 虚拟机盒子为模板，新建一台虚拟机；</li>
                                <li>并按照 <code>Homestead.yaml</code> 里的配置信息，对这台新建的虚拟机进行配置；</li>
                                <li>配置完成后启动虚拟机。</li>
                            </ul>

                            <p>成功启动后，还是在 <code>~/Homestead</code> 目录中，通过以下命令来 SSH 登录 Homestead 虚拟机中：</p>
                            <pre><code class="language-bash">&gt; vagrant ssh</code></pre>
                            <p>在我们登录成功后，你能看到类似于如下图的界面，现在我们在该终端界面中输入的所有命令都将运行在 Homestead 虚拟机上。</p><p>
                            <img src="../images/JWXEpjiUdi.png" width="480" alt="JWXEpjiUdi.png" /></p>

                            <p>在虚拟机界面下可以输入退出虚拟机：</p>
                            <pre><code class="language-bash">$ exit</code></pre>
                            <p>最后尝试关闭 Homestead：</p>
                            <pre><code class="language-bash">&gt; vagrant halt</code></pre>
                            <blockquote>
                                <p>注意：本书中因为虚拟机的存在，我们会有两个运行命令行的环境，一个是主机，另一个是 Homestead 虚拟机。我们会在命令的前面使用『命令行提示符』来区分主机和 Homestead。请记住以 <code>&gt;</code> 开头的命令是运行在主机里，<code>$</code> 开头的命令是运行在 Homestead 虚拟机里。详见 <a href="https://laravel-china.org/courses/laravel-essential-training-5.1/432/reading-guide#%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%8F%90%E7%A4%BA%E7%AC%A6">写作约定 - 命令行提示符</a>。</p>
                            </blockquote>
                            <h2>FAQ</h2>
                            <p>以下是环境部署的常见问题搜集，方便遇到问题的同学查阅。如果一切正常，可以跳过以下内容。</p>
                            <h3>1. SSH auth method: private key</h3>
                            <blockquote>
                                <p><a href="https://laravel-china.org/topics/4796/ssh-auth-method-private-key-solution-summary-when-homestead-starts">Homestead 启动时 SSH auth method: private key 解决方案汇总</a></p>
                            </blockquote>
                            <h3>2. Failed to restart php7.0-fpm.service: Unit php7.0-fpm.service not found.</h3>
                            <blockquote>
                                <p><a href="https://laravel-china.org/topics/4804/vagrant-starts-the-virtual-machine-the-php70-module-can-not-be-found-how-can-this-be-handled">Vagrant 启动虚拟机 提示 PHP7.0 模块找不到，这个怎么处理呢？</a></p>
                            </blockquote>
                        </div>

                    </div>


                </div>

                <div>
                    <a class="ui basic button small  pull-left popover " data-content="2.3. 开发环境搭建" href="2.3the-development-environment-to-build.html"><i class="icon arrow left"></i> 上一篇</a>
                    <a class="ui basic button small  pull-right popover " data-content="2.5. 开发环境搭建 - Windows" href="2.5development-environment-windows.html">下一篇 <i class="icon arrow right"></i></a>
                    <div class="clearfix"></div>
                </div>
            </div>

            <div class="four wide column">
                <div class="item header">

                    <div class="ui segment orange text-center" style="padding: 25px;">
                        刻意练习，每日精进。
                    </div>


                    <div class="ui segment">

                        <div class="ui three statistics">
                            <div class="ui huge statistic">
                                <div class="value">22</div>
                                <div class="label">点赞</div>
                            </div>
                            <div class="ui huge statistic">
                                <div class="value">9179</div>
                                <div class="label">浏览</div>
                            </div>
                            <div class="ui huge statistic">
                                <div class="value">1</div>
                                <div class="label">评论</div>
                            </div>
                        </div>

                        <br>

                    </div>
                </div>

                <div class="ui stackable cards">
                    <div class="ui  card column author-box grid" style="margin-top: 20px;">

                        <div class="ui fluid" style="margin-top: 20px;">
                            <div class="ui teal ribbon label"><i class="star icon"></i> 作者</div>
                        </div>

                        <a class="avatar-link">
                            <img class="ui centered circular tiny image "
                                 src="../images/1_1479342408.png">
                            </img>
                        </a>

                        <div class="extra content ui center aligned container">
                            <a class="header">Summer</a>
                            <div class="description"></div>
                        </div>
                    </div>
                </div>

                <div class="ui sticky" style="padding-top:20px">
                    <div class="ui  card column author-box grid " id="toc">
                    </div>
                </div>
            </div>

        </div>

    </div>

    <a class="circular ui icon button fixed feedback popover" data-content="建议与反馈 @Summer" data-position="left center">
        <i class="icon talk outline"></i>
    </a>

    <div class="ui inverted vertical footer segment">
        <div class="ui center aligned container">
            <div class="ui stackable inverted divided grid">
                <div class="four wide column">
                    <h4 class="ui inverted header">友站</h4>
                    <div class="ui inverted link list">
                        <a href="https://laravel-china.org/" class="item" target="_blank">Laravel China 社区</a>
                        <a href="https://easywechat.org/" class="item" target="_blank">EasyWechat</a>
                        <a href="https://yousails.com/" class="item" target="_blank">优帆远扬</a>
                    </div>
                </div>
                <div class="four wide column">
                    <h4 class="ui inverted header">资源推荐</h4>
                    <div class="ui inverted link list">
                        <a href="https://d.laravel-china.org/" class="item" target="_blank">Laravel 中文文档</a>
                        <a href="https://cs.laravel-china.org/" class="item" target="_blank">Laravel 速查表</a>
                    </div>
                </div>
                <div class="eight wide column">
                    <h4 class="ui inverted  header">Laravel 实战教程</h4>
                    <p>
                        编程是技能，不是知识，技能的唯一学习路径就是重复、实战性练习。
                    </p>

                    <p>
                        <a class="ui teal button" href="https://laravel-china.org/contact"><i class="icon idea "></i>
                            联系我
                        </a>
                    </p>
                </div>
            </div>

            <div class="ui inverted section divider"></div>
            <div>

                <p style="font-size:0.9em; margin-top:20px;margin-bottom: -8px;color: rgb(137, 137, 140);"
                   class="ui inverted ">
                    由 <a href="http://weibo.com/u/1837553744?is_hot=1" target="_blank"
                         style="color: inherit;">Summer</a> 设计和编码 <span style="color: #e27575;font-size: 14px;">❤</span>
                </p>
            </div>
        </div>
    </div>
</div>


<!-- Scripts -->
<script src="../js/app.js"></script>

</body>
</html>
